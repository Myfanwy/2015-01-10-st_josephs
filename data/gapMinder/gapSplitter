#$ /bin/bash

# Create variable to define our gapminder file.
# It is assumed that this file is tab delimited
GAP_MINDER_FILE="gapminderDataFiveYear.txt"

# Create individual files for each country-year combination 
#while IFS=$'\t' read country year pop continent lifeExp gdp 
#do 
#    # Redirect output from echo command to a new file
#    echo -e "$country\t$year\t$pop\t$continent\t$lifeExp\t$gdp" > "$country-$year.txt" 
#    awk '{print $1}'
#done < $GAP_MINDER_FILE

# Create list of countries
awk -F$'\t' '{print $1}' $GAP_MINDER_FILE | uniq > countries.txt

# Capture number of countries
NUM_COUNTRIES=$(wc -l countries.txt | awk '{print $1}')
echo "Number of lines" $NUM_COUNTRIES


for i in $(seq 1 $NUM_COUNTRIES)
do
   COUNTRY=$(head -n $i countries.txt | tail -n 1)
   echo $COUNTRY
   grep "$COUNTRY" $GAP_MINDER_FILE > $(echo $COUNTRY | sed s/\\s/_/g | sed s/\\.//g | sed s/,//g).cc.txt
done 

# Split by country. all rows in one file.
#
# work with data as it is at this point? Where each country is in a dir?
# Or break it up different?



# Awk the first column, run uniq, then store the file.
# You get list of countries

# Inside loop, what do you need?
# If the country matches the line, then print the line to the file
#
# Create the file first
#


